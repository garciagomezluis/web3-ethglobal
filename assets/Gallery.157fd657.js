var ye=Object.defineProperty,Ie=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var ae=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&ae(e,r,t[r]);if(A)for(var r of A(t))ne.call(t,r)&&ae(e,r,t[r]);return e},U=(e,t)=>Ie(e,Ee(t));var le=(e,t)=>{var r={};for(var a in e)re.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&A)for(var a of A(e))t.indexOf(a)<0&&ne.call(e,a)&&(r[a]=e[a]);return r};import{R as Ce,t as b,i as G,U as D,W as I,r as o,X as Se,k as E,Y as X,Z as V,_ as ke,$ as Fe,a0 as se,a1 as N,a2 as ie,a3 as K,a4 as Pe,a5 as Oe,a6 as Re,d as g,m as $,j as d,T as W,a7 as Y,a8 as M,a9 as B,H,I as oe,aa as Ne,ab as $e,F as ue,M as Te,e as qe,B as L,V as me,S as we,n as je,ac as ce,ad as de,ae as Ae,af as He,ag as Le,ah as De,ai as Me,aj as Be,o as ze}from"./index.60673718.js";import{u as Ue,I as Ve}from"./stepper.6e74842f.js";function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x.apply(this,arguments)}function T(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,l;for(l=0;l<a.length;l++)n=a[l],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var We=["id","isRequired","isInvalid","isDisabled","isReadOnly"],Ge=["getRootProps","htmlProps"],ve=Ce({strict:!1,name:"FormControlContext"}),Xe=ve[0],Z=ve[1];function Ke(e){var t=e.id,r=e.isRequired,a=e.isInvalid,n=e.isDisabled,l=e.isReadOnly,s=T(e,We),i=ke(),u=t||"field-"+i,c=u+"-label",m=u+"-feedback",p=u+"-helptext",f=o.exports.useState(!1),C=f[0],S=f[1],_=o.exports.useState(!1),F=_[0],w=_[1],O=Fe(),R=O[0],j=O[1],fe=o.exports.useCallback(function(v,h){return v===void 0&&(v={}),h===void 0&&(h=null),x({id:p},v,{ref:se(h,function(P){!P||w(!0)})})},[p]),ge=o.exports.useCallback(function(v,h){var P,te;return v===void 0&&(v={}),h===void 0&&(h=null),x({},v,{ref:h,"data-focus":N(R),"data-disabled":N(n),"data-invalid":N(a),"data-readonly":N(l),id:(P=v.id)!=null?P:c,htmlFor:(te=v.htmlFor)!=null?te:u})},[u,n,R,a,l,c]),xe=o.exports.useCallback(function(v,h){return v===void 0&&(v={}),h===void 0&&(h=null),x({id:m},v,{ref:se(h,function(P){!P||S(!0)}),"aria-live":"polite"})},[m]),be=o.exports.useCallback(function(v,h){return v===void 0&&(v={}),h===void 0&&(h=null),x({},v,s,{ref:h,role:"group"})},[s]),_e=o.exports.useCallback(function(v,h){return v===void 0&&(v={}),h===void 0&&(h=null),x({},v,{ref:h,role:"presentation","aria-hidden":!0,children:v.children||"*"})},[]);return{isRequired:!!r,isInvalid:!!a,isReadOnly:!!l,isDisabled:!!n,isFocused:!!R,onFocus:j.on,onBlur:j.off,hasFeedbackText:C,setHasFeedbackText:S,hasHelpText:F,setHasHelpText:w,id:u,labelId:c,feedbackId:m,helpTextId:p,htmlProps:s,getHelpTextProps:fe,getErrorMessageProps:xe,getRootProps:be,getLabelProps:ge,getRequiredIndicatorProps:_e}}var Ye=b(function(e,t){var r=G("Form",e),a=D(e),n=Ke(a),l=n.getRootProps;n.htmlProps;var s=T(n,Ge),i=I("chakra-form-control",e.className);return o.exports.createElement(Xe,{value:s},o.exports.createElement(Se,{value:r},o.exports.createElement(E.div,x({},l({},t),{className:i,__css:r.container}))))}),Ze=["isDisabled","isInvalid","isReadOnly","isRequired"],Je=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];function pe(e){var t=Qe(e),r=t.isDisabled,a=t.isInvalid,n=t.isReadOnly,l=t.isRequired,s=T(t,Ze);return x({},s,{disabled:r,readOnly:n,required:l,"aria-invalid":V(a),"aria-required":V(l),"aria-readonly":V(n)})}function Qe(e){var t,r,a,n=Z(),l=e.id,s=e.disabled,i=e.readOnly,u=e.required,c=e.isRequired,m=e.isInvalid,p=e.isReadOnly,f=e.isDisabled,C=e.onFocus,S=e.onBlur,_=T(e,Je),F=e["aria-describedby"]?[e["aria-describedby"]]:[];return n!=null&&n.hasFeedbackText&&n!=null&&n.isInvalid&&F.push(n.feedbackId),n!=null&&n.hasHelpText&&F.push(n.helpTextId),x({},_,{"aria-describedby":F.join(" ")||void 0,id:l!=null?l:n==null?void 0:n.id,isDisabled:(t=s!=null?s:f)!=null?t:n==null?void 0:n.isDisabled,isReadOnly:(r=i!=null?i:p)!=null?r:n==null?void 0:n.isReadOnly,isRequired:(a=u!=null?u:c)!=null?a:n==null?void 0:n.isRequired,isInvalid:m!=null?m:n==null?void 0:n.isInvalid,onFocus:ie(n==null?void 0:n.onFocus,C),onBlur:ie(n==null?void 0:n.onBlur,S)})}var et=["className","children","requiredIndicator","optionalIndicator"],tt=b(function(e,t){var r,a=X("FormLabel",e),n=D(e);n.className;var l=n.children,s=n.requiredIndicator,i=s===void 0?o.exports.createElement(at,null):s,u=n.optionalIndicator,c=u===void 0?null:u,m=T(n,et),p=Z(),f=(r=p==null?void 0:p.getLabelProps(m,t))!=null?r:x({ref:t},m);return o.exports.createElement(E.label,x({},f,{className:I("chakra-form__label",n.className),__css:x({display:"block",textAlign:"start"},a)}),l,p!=null&&p.isRequired?i:c)}),at=b(function(e,t){var r=Z(),a=K();if(!(r!=null&&r.isRequired))return null;var n=I("chakra-form__required-indicator",e.className);return o.exports.createElement(E.span,x({},r==null?void 0:r.getRequiredIndicatorProps(e,t),{__css:a.requiredIndicator,className:n}))});function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y.apply(this,arguments)}function q(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,l;for(l=0;l<a.length;l++)n=a[l],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var rt=["htmlSize"],J=b(function(e,t){var r=e.htmlSize,a=q(e,rt),n=G("Input",a),l=D(a),s=pe(l),i=I("chakra-input",e.className);return o.exports.createElement(E.input,y({size:r},s,{__css:n.field,ref:t,className:i}))});J.id="Input";var nt=["placement"],lt={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},st=E("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),he=b(function(e,t){var r,a=e.placement,n=a===void 0?"left":a,l=q(e,nt),s=(r=lt[n])!=null?r:{},i=K();return o.exports.createElement(st,y({ref:t},l,{__css:y({},i.addon,s)}))}),it=b(function(e,t){return o.exports.createElement(he,y({ref:t,placement:"left"},e,{className:I("chakra-input__left-addon",e.className)}))});it.id="InputLeftAddon";var ot=b(function(e,t){return o.exports.createElement(he,y({ref:t,placement:"right"},e,{className:I("chakra-input__right-addon",e.className)}))});ot.id="InputRightAddon";var ct=["placement"],dt=["className"],ut=["className"],mt=E("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),Q=b(function(e,t){var r,a,n,l=e.placement,s=l===void 0?"left":l,i=q(e,ct),u=K(),c=u.field,m=s==="left"?"insetStart":"insetEnd",p=y((n={},n[m]="0",n.width=(r=c==null?void 0:c.height)!=null?r:c==null?void 0:c.h,n.height=(a=c==null?void 0:c.height)!=null?a:c==null?void 0:c.h,n.fontSize=c==null?void 0:c.fontSize,n),u.element);return o.exports.createElement(mt,y({ref:t,__css:p},i))});Q.id="InputElement";var vt=b(function(e,t){var r=e.className,a=q(e,dt),n=I("chakra-input__left-element",r);return o.exports.createElement(Q,y({ref:t,placement:"left",className:n},a))});vt.id="InputLeftElement";var pt=b(function(e,t){var r=e.className,a=q(e,ut),n=I("chakra-input__right-element",r);return o.exports.createElement(Q,y({ref:t,placement:"right",className:n},a))});pt.id="InputRightElement";function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},k.apply(this,arguments)}function ee(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,l;for(l=0;l<a.length;l++)n=a[l],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var ht=["children","placeholder","className"],ft=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize","isFullWidth"],gt=["children"],xt=b(function(e,t){var r=e.children,a=e.placeholder,n=e.className,l=ee(e,ht);return o.exports.createElement(E.select,k({},l,{ref:t,className:I("chakra-select",n)}),a&&o.exports.createElement("option",{value:""},a),r)}),bt=b(function(e,t){var r=G("Select",e),a=D(e),n=a.rootProps,l=a.placeholder,s=a.icon,i=a.color,u=a.height,c=a.h,m=a.minH,p=a.minHeight,f=a.iconColor,C=a.iconSize;a.isFullWidth;var S=ee(a,ft),_=Pe(S,Re),F=_[0],w=_[1],O=pe(w),R={width:"100%",height:"fit-content",position:"relative",color:i},j=Oe({paddingEnd:"2rem"},r.field,{_focus:{zIndex:"unset"}});return o.exports.createElement(E.div,k({className:"chakra-select__wrapper",__css:R},F,n),o.exports.createElement(xt,k({ref:t,height:c!=null?c:u,minH:m!=null?m:p,placeholder:l},O,{__css:j}),e.children),o.exports.createElement(It,k({"data-disabled":N(O.disabled)},(f||i)&&{color:f||i},{__css:r.icon},C&&{fontSize:C}),s))}),_t=function(t){return o.exports.createElement("svg",k({viewBox:"0 0 24 24"},t),o.exports.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},yt=E("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),It=function(t){var r=t.children,a=r===void 0?o.exports.createElement(_t,null):r,n=ee(t,gt),l=o.exports.cloneElement(a,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return o.exports.createElement(yt,k({},n,{className:"chakra-select__icon-wrapper"}),o.exports.isValidElement(a)?l:null)};const Et=({accept:e,multiple:t=!1,onSelect:r=()=>{}})=>{const[a,n]=o.exports.useState([]),l=o.exports.useRef();return o.exports.useEffect(()=>{const i=document.createElement("input");i.type="file",i.accept=e,i.multiple=t,i.onchange=u=>{const c=[...u.target.files];n(c),r(c)},l.current=i},[e,t,r]),{files:a,open:()=>{var i;(i=l.current)==null||i.click()}}},Ct=({onSelect:e,disabled:t=!1})=>{const{open:r}=Et({accept:"image/png",multiple:!0,onSelect:e}),a=X("FileUpload",{variant:t?"disabled":"default"});return g($,{__css:a,onClick:()=>{t||r()},children:[d(W,{children:"Click to import images"}),g(W,{children:["Up to ",Y," - (PNG) ",M," x ",B]})]})},St=r=>{var a=r,{width:e}=a,t=le(a,["width"]);const{value:n,increment:l,decrement:s,atLowest:i,atGreatest:u}=Ue(t);return g(H,{width:e,children:[d(oe,{"aria-label":"decrement",disabled:i,icon:d(Ne,{}),onClick:s}),d(J,{readOnly:!0,"aria-label":"display",textAlign:"center",value:n}),d(oe,{"aria-label":"increment",disabled:u,icon:d($e,{}),onClick:l})]})},kt=(e,t,r)=>U(z({},e),{[t]:r}),Ft=({config:e,setConfig:t})=>{const{name:r,usageType:a,usageValue:n}=e,l=(s,i)=>t(u=>kt(u,s,i));return g(ue,{children:[g(Ye,{children:[d(tt,{children:"Name"}),d(J,{placeholder:"Blue Sky",value:r,onChange:s=>l("name",s.target.value)})]}),g(me,{align:"flex-start",mt:"5",w:"full",children:[d(W,{children:"Usage"}),g(H,{align:"center",mt:4,w:"full",children:[g(bt,{value:a,onChange:s=>l("usageType",s.target.value),children:[d("option",{value:"atleast",children:"At least"}),d("option",{value:"exact",children:"Exact"}),d("option",{value:"atmost",children:"At most"})]}),d(we,{}),d(St,{initialValue:1,minValue:1,value:n,onChange:s=>l("usageValue",s)})]})]})]})},Pt=({onClose:e,onChange:t,defaultConfig:r})=>{const[a,n]=o.exports.useState(r);return g(ue,{children:[d(Te,{children:d(Ft,{config:a,setConfig:n})}),g(qe,{children:[d(L,{mr:3,variant:"ghost",onClick:e,children:"Close"}),d(L,{onClick:()=>{t(a),e()},children:"Save"})]})]})},Ot=({openModal:e,remove:t})=>{const r=X("ImageOptions",{variant:"default"});return g(me,{__css:r,children:[d(L,{leftIcon:d(He,{}),my:"10px !important",w:"70%",onClick:e,children:"Edit properties"}),d(L,{leftIcon:d(Le,{}),my:"10px !important",w:"70%",onClick:t,children:"Remove"})]})},Rt=({item:e,remove:t,update:r})=>{const[a,n]=o.exports.useState(!1),{open:l,close:s}=je(),{file:i,config:u}=e,{name:c,usageType:m,usageValue:p}=u,f=()=>{l({element:Pt,props:{onClose:s,onChange:r,defaultConfig:u},locked:!1,title:"Image properties"})};return o.exports.useEffect(()=>{n(c==="")},[c]),g($,{h:B,pos:"relative",w:M,children:[d(Ve,{pos:"absolute",src:URL.createObjectURL(i)}),!a&&g(ce,{pos:"absolute",status:"success",children:[d(de,{}),c," - ",Ae(m)," ",p]}),a&&g(ce,{pos:"absolute",status:"error",children:[d(de,{}),"Images must have a name"]}),d(Ot,{openModal:f,remove:t})]})},Nt=async(e,t=M,r=B)=>{const n=e.map(URL.createObjectURL).map(s=>Me(s,t,r));if(!(await Promise.all(n)).every(s=>s))throw new Error(`Images must all be of ${t}x${r}`);return!0},$t=(e,t,r=Y)=>{const a=Be(e,t,"name");if(a.length>r)throw new Error(`You can upload up to ${r} images by layer`);return a},Tt=(e,t,r)=>{const a=t.map(s=>s.name);return $t(t,e,r).filter(s=>a.indexOf(s.name)!==-1)},qt=e=>({id:Math.random().toString().substring(2),file:e,config:{name:e.name,usageType:"atleast",usageValue:1}}),wt=({width:e=M,height:t=B,maxAmountImages:r=Y})=>{const[a,n]=o.exports.useState([]),{showError:l}=De({showErrorTitle:"Try again"});return{items:a,push:async c=>{try{await Nt(c,e,t);const m=a.map(f=>f.file),p=Tt(m,c,r);n(f=>[...f,...p.map(qt)])}catch(m){l(m.message)}},remove:c=>{n([...a.filter(m=>c!==m.id)])},update:(c,m)=>{const{name:p,usageType:f,usageValue:C}=m;n(S=>S.map(_=>_.id!==c?_:U(z({},_),{config:{name:p,usageType:f,usageValue:C}})))},pushEnabled:a.length!==r}},Lt=({id:e})=>{const{items:t,push:r,remove:a,update:n,pushEnabled:l}=wt({}),{updateLayerImages:s}=ze();return o.exports.useEffect(()=>{s(e,t)},[t]),g(H,{children:[d($,{h:"300px",maxW:"calc(100% - 320px)",overflowY:"hidden",children:d($,{overflowX:"scroll",pb:"10",w:"full",children:d(H,{pos:"relative",children:t.map(i=>d($,{flex:"1",mx:"5px !important",children:d(Rt,{item:i,remove:()=>a(i.id),update:u=>n(i.id,u)})},i.id))})})}),d(Ct,{disabled:!l,onSelect:r})]})};export{Lt as Gallery,Lt as default};
